'use strict';(function(f){function qa(b,a){function d(){this.constructor=b}Z(b,a);b.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}function ra(b,a,d){var c=b.series,k=c.indexer,e=c.chart.geoParser,g,h=c.chartArea.isZoomLive(),l=a.x,m=a.y,u=a.width,r=a.height,q=f.bboxLib.fromRect(a),G,C=c.getXYZTranslator(),y,t=function(a){a=C(a[0],a[1]);return[l+a[0]*u,m+a[1]*r]};b.xyzTranslator=t;k.indexKeys(["coordinates","bbox"],{},0);var D=c.userPoints,w=!1,n=function(a){return ea(a,function(a,
d){return t([a,d])})},p=function(a){return D[a].map||k.getValue("map",a)||k.getValue("mapData",a)};b.everVisibleCount=0;d=function(a,d){k.getValue("pos",a);G=c.getMapData();var l=d=void 0,m=!0,u=k.getValue("coordinates",a,g),r=u&&u.originalPath;if(G=G.features[0].id?f.jL.find(G.features,function(d){d=d.id;var c=D[a].mapDataId;return d&&c&&d.toLowerCase()===c.toLowerCase()})||p(a):c.userPoints[a].map)d=G.geometry.type,y=G.bbox,l=n(y),G.bbox&&f.jL.isDefined(G.bbox[0])||(l=f.undefVal),w=!0,l&&(w=f.bboxLib.intersect([q,
l]),!u||u.isVisible||w||(m=w||f.bboxLib.everVisible(q,u.shapeBounds,l)),u&&!u.everVisible&&m&&!h&&r&&(u.pathD=f.pathLib.translate(r,u.translator).toString()));var C=void 0;if(m)if(r)C=f.pathLib.translate(r,t);else{C=D[a];var v=p(a)||G;if(r=e.toPath(v)){var L=function(a){return a.getMapData?a.getMapData():a.mapData||a.map}(C),W=L.bbox||f.jL.evalPath(L,"properties.bbox");L=f.jL.evalPath(L,"properties.cent")||[W[0]+W[2]/2,W[1]+W[3]/2];L=t(L);C.plotX=L[0];C.plotY=L[1];C.tooltipPos=L}d=d||f.jL.evalPath(v,
"geometry.type");C=f.pathLib.translate(r,t);!l&&(l=C.bbox())&&(w=f.bboxLib.intersect([q,l]))}else C=u.pathObj;m&&b.everVisibleCount++;u&&delete u.prev;g={meta:{},styleSet:u&&h?u.styleSet:c.getPointAttr(c.userPoints[a]),pathObj:C,isVisible:w,prev:u,originalPath:r,shapeBounds:l,translator:t,everVisible:m,fitBoxData:u?u.fitBoxData:f.undefVal};l&&(g.xyz=f.bboxLib.center(l));if(!h&&w&&("Polygon"===d||"MultiPolygon"===d)){b.altPossibleLabelPos=f.undefVal;var fa=w?C:f.undefVal;g.hitTest=function(a,d){return fa&&
fa.hitTest(a,d)}}g.meta.bodyD=g.pathObj;k.setValue("coordinates",a,g)};for(var v=0,P=D.length;v<P;v++)d(v,P);f.jL.evalPath(G,"properties.cent");b.coordRect=a;b.validate(!0);b.renderOrder=k.sortByNone();b.renderOrderRev=b.renderOrder.slice(0);b.renderOrderRev.reverse()}function ha(b,a){var d=a.id,c=a.bbox,k=null==a.properties?{}:a.properties;b=sa(b,a);return null==d&&null==c?{type:"Feature",properties:k,geometry:b}:null==c?{type:"Feature",id:d,properties:k,geometry:b}:{type:"Feature",id:d,bbox:c,properties:k,
geometry:b}}function sa(b,a){function d(a){return h(a)}function c(a){for(var d=[],c=0,b=a.length;c<b;++c){var e=a[c],k=d;k.length&&k.pop();for(var g=l[0>e?~e:e],f=0,m=g.length;f<m;++f)k.push(h(g[f],f));if(0>e)for(e=k,k=e.length,g=k-m;g<--k;)m=e[g],e[g++]=e[k],e[k]=m}2>d.length&&d.push(d[0]);return d}function k(a){for(a=c(a);4>a.length;)a.push(a[0]);return a}function e(a){return a.map(k)}function g(a){var b=a.type;switch(b){case "GeometryCollection":return{type:b,geometries:a.geometries.map(g)};case "Point":a=
h(a.coordinates);break;case "MultiPoint":a=a.coordinates.map(d);break;case "LineString":a=c(a.arcs);break;case "MultiLineString":a=a.arcs.map(c);break;case "Polygon":a=e(a.arcs);break;case "MultiPolygon":a=a.arcs.map(e);break;default:return null}return{type:b,coordinates:a}}var h=ta(b.transform),l=b.arcs;return g(a)}function ia(b,a){var d=b.chart,c=d.internal.mappingInfo,k=d.geoParser.isSoloCountry(c);a=k||!b.projection.type&&a&&(360<=a[2]||180<=a[1]);var e,g=f.jL.isDefined(e=d.options("mapping.projection")),
h=a?!1:g?e:c.projection;!k&&g&&c.projection!==e&&(c.projection=h);c=b.zoomBBox||b.chart.geoParser.getDataBBox();k=b.getZoomAxes();b.projection=ja("none");if(k.length)if(h){var l="none"!==c;k=f.jL.isString(h)?h:h.type;g=h.point||f.jL.map(l?f.jL.map(f.bboxLib.center(c),z):[0,0],X);h=h.parallels||f.jL.map(l?f.jL.map([c[1]+.1*c[3],c[1]+.9*c[3]],z):[0,1],X);b.projection=ja(k,g,h)||aa(g)}else b.projection=ka();a&&e&&"none"!==e.type&&d.error.addWarning(d.id,"The map is already projected.")}function ua(b){var a=
b.chartArea,d=a.chart,c=a.chart.internal.mappingInfo,k=b.getMapData();a.ctManager.isMapLayer(b)&&"object"===typeof k&&(d={data:d.options("dataSet"),binding:d.options("dataSetBinding"),points:b.userPoints,mode:"makePoints",series:b,cmi:c},a=a.chart.geoParser.parse(k,d),d=b.options("type"),d="marker"===a.type&&"bubble"===d?"bubble":"marker"===a.type?"marker":"map",k={points:a.points,map:{bbox:a.bbox,type:a.type,solo:k.solo}},d&&(k.type=d),b.options(k,!1),b.seriesDirty.pointIndex(!0),b.setData())}function va(b,
a){var d=b.chart,c=[],k=[],e=[],g=[],h=[],l=d.options("mapping.base.layers"),m=d.options("mapping.referenceLayers"),u=d.options("mapping.base.series"),r=function(a){var d,e=function(a){return b.series().find(function(d){var c=a.mapDataId;return d.options("mapDataId")===c})};c.length!==a.length&&f.jL.each(a,function(a){e(a)||(b.addSeries(a),d=!0)});b.series().each(function(d){var c=d.options("map");f.jL.isString(c)&&!d.options("mapDataId")&&(c=f.jL.find(a,{map:c}),d.options(c,!1))});return d};b.series().each(function(a){a=
a.getConfig();c.push(a);switch(wa(a)){case "loaded":g.push(a);e.push(a);break;case "proto":e.push(a);h.push(a);break;case "config":k.push(a);h.push(a);break;case "none":e.push(a)}});var q=d.internal.mappingInfo;u={chartMappingInfo:q,contextSeries:u,existingSeries:e};u.series=k;var G=b.readyDefer.hold("mapLoad"),C=d.inited&&d.loading(!0);d.geoParser.loadMaps(l,m,u,function(c,e){c=r(e);h.length||c?d.geoParser.populateSeriesWhenAble(b._series,q,function(){b.series().each(ua);b.zoomBBoxMax=Y(d);if("zoom"!==
b.chart.action.last()){var c=b.chart.geoParser.getDataBBox();c&&ba(b,c);delete b.zoomBBox;delete b.zoomBBoxSet}d.isRendered&&(b.isDirtyPreRender=!0,ba(b,b.chart.geoParser.getDataBBox()),f.jL.keys(b.readyDefer._onReady).length||!1===a||b.chartAreaSet.reflow());b.readyDefer.release(G);C&&d.loading(!1)}):(b.readyDefer.release(G),C&&d.loading(!1))},function(){b.readyDefer.release(G);C&&d.loading(!1)})}function xa(b){var a=b.chart,d=a.uiItems?a.uiItems("zoom"):null,c=a.currentOptions.axisToZoom;if(!d&&
""!==c&&"none"!==c&&!1!==f.jL.evalPath(a.currentOptions,"toolbar.visible")){d={key:"zoom",label:{text:""},margin:10,boxVisible:!1,itemsBox:{boxVisible:!1,layout:"vertical",visible:!0},position:"brbr",stackDirection:"none",ignoreDefault:!0,items:{zoomIn:{y:.5,tooltip:"Zoom in",label:{text:"+"},events:{click:"zoom10In"},corners:["round","round","square","square"]},zoomOut:{label:{text:"-"},tooltip:"Zoom out",events:{click:"zoom10Out"},corners:["square","square","round","round"]}},defaultItem:{width:30,
height:30,label:{align:"center",style:{fontSize:"16px"}}},actions:{zoom10In:function(){b.chart.zoom("+80%")},zoom10Out:function(){b.chart.zoom("-80%")}}};c=a.toolbar();var k=f.jL.evalPath(c,"currentOptions.items.zoom");k&&!1===k.visible||!c.items||(c.items.add(k?f.jL.extend(d,k):d),a.chartAreaSet.reflow(f.undefVal,!1,!0),c.reactivateAccessibility())}}function ya(b,a,d){var c=b.chart,k=c.geoParser,e,g=[],h,l=f.jL.getValType(a);if("object"===l||"function"===l)if(c.series().each(function(d){h=d.points().filter(a);
Array.prototype.push.apply(g,h)}),g.length)a=k.getBBoxOfPoints(g);else return c.error.addWarning("The specified point filter did not match any points."),!1;else if("string"===l&&1<a.length&&isNaN(parseInt(a[1]))&&(e=k.findJsObjByMapCode(a))){if(e.zoomTo){e.zoomTo();return}a=k.getBBoxOfPoints(e)}la(b,a,d);return!0}function la(b,a,d){function c(a){var d=f.bboxLib.center(b.zoomBBox||u);m&&(a=Math.min(a,m));return k([d[0],d[1],a])}function k(a){var d=[a[0],a[1]],c=a[2];a=f.jL.clamp(r[2]/c,1,r[2]);c=f.jL.clamp(r[3]/
c,1,r[3]);return f.bboxLib.snapInside(f.bboxLib.fromCenter(d,[a,c]),r)}function e(a){var d;if("initial"===a)return Y(g);u=b.zoomBBox||u;var e="+"===a[0]?1:"-"===a[0]?-1:0;(d=a.replace(/^\D+/g,"")).length&&(d=parseFloat(d)/100);if(0===e)return c(d);a=b.zoomBBoxMax[2]/u[2];return c(Math.max(a+a*d*e,1))}var g=b.chart,h=g.geoParser,l=f.jL.getValType(a);h=h.getDataBBox();var m=g.options("mapping.zoomLimit"),u=h.slice(0),r=b.zoomBBoxMax;if("number"===l)a=c(a);else if("string"===l)a=e(a);else if(4!==a.length)if(3===
a.length)a=k(a);else if(2===a.length)a=f.bboxLib.snapInside(f.bboxLib.translate(b.zoomBBox||u,a),r);else throw"Zooming config not supported.";l=b.zoomBBoxMax;!l||l[2]!==a[2]&&l[3]!==a[3]||(a=l);za(b,a,d)}function Y(b){return b.geoParser.getDefinedDataBBox(b.internal.mappingInfo)||b.geoParser.getDataBBox()}function ba(b,a){b.zoomAxes.length||b.setZoomAxes();(b=b.zoomAxes).length&&(b[0].setDataRange([a[0],a[0]+a[2]]),b[1].setDataRange([a[1],a[1]+a[3]]))}function ma(b,a){b.zoomAxes.length||b.setZoomAxes();
b=b.zoomAxes;b[0].zoom(a[0],a[0]+a[2],!1);b[1].zoom(a[1],a[1]+a[3],!1);b[0].setViewState();b[1].setViewState()}function za(b,a,d){ma(b,a);var c=b.chart;b.zoomBBox=a;b=b.zoomBBoxInitial=Y(c);a=!!f.bboxLib.compareBoxes(a,b,3);c.toolbar().zoomInOut(a);c.redraw(d)}function na(b,a){var d=b.zoomBBox||b.chart.geoParser.getDataBBox();b.zoomBBoxSet=d;var c;if(c=d){c=d;d=b.chart;d.internal.mappingInfo.projection&&(c=Aa(b,c));a&&(c=f.bboxLib.padRel(c,d.options("defaultSeries.shape.padding")||.05));var k=f.bboxLib.fromRect(b.contentRect);
b=c[0];a=b+c[2];d=c[1];c=d+c[3];var e=a-b,g=c-d,h=e/k[2],l=g/k[3];k=b+e/2;var m=d+g/2;h<l?(e*=l/h,b=[k-e/2,d,k+e/2,c]):(e=h/l*g,b=[b,m-e/2,a,m+e/2]);c=f.bboxLib.fromLTRB(b)}return c}var Z=function(b,a){Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return Z(b,a)},ea=function(b,a){for(var d=b[3]/2,c=b[2]/2,k,e,g,h,l=b[0],f=0;2>=f;l+=c,f++)for(var u=b[1],r=0;2>=r;u+=d,r++)if(0===f||2===f||0===r||2===
r){var q=a(l,u);k=void 0!==k?Math.min(q[0],k):q[0];e=void 0!==e?Math.min(q[1],e):q[1];g=void 0!==g?Math.max(q[0],g):q[0];h=void 0!==h?Math.max(q[1],h):q[1]}return[k,e,g-k,h-e]},oa=function(){return{axes:"x,y",values:"map",requiredData:"",supportedData:"",privateAxes:"",customAxisOptions:{x:{visible:!1,type:"map"},y:{visible:!1,type:"map"}}}},Ba=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.kind="map";a.typeConfig=oa();a.everVisibleCount=0;return a}qa(a,b);a.prototype.getTypeConfigDefault=
function(){return oa()};a.prototype.applyBoundsToAxes=function(a,c){var d=this.series,b=d.xAxis;d=d.yAxis;a[2]<c[2]&&(a[0]=c[0],a[2]=c[2]);a[3]<c[3]&&(a[1]=c[1],a[3]=c[3]);b.setMapRange([a[0],a[0]+a[2]],[c[0],c[0]+c[2]]);d.setMapRange([a[1],a[1]+a[3]],[c[1],c[1]+c[3]])};a.prototype.setCoordinates=function(a,c){ra(this,a,c);return this};a.prototype.possibleLabelPositions=function(a,c,b,e,g){if(this.altPossibleLabelPos)return this.altPossibleLabelPos(this,a,c,b,e,g);g=this.series;b=e.meta;var d=a.getMapData();
c=c||e.pathD||e.meta.bodyD;var k=f.bboxLib.fromRect(g.renderRect);g=this.xyzTranslator;var m=e.xyz;a=[];var u=b.labelSize;if(e.everVisible){var r=f.jL.evalPath(e.prevCoord,"meta.label"),q=e.shapeBounds;k=e.everVisible||(r?f.bboxLib.intersect([r,k]):!0);if((d=f.jL.evalPath(d,"properties.cent"))||!k)return[f.bboxLib.fromCenter(d?g(d):m,b.labelSize)];if(20>this.everVisibleCount)a:{if(q&&(e.fitBoxData||(c=f.pathLib.fromString(c),e.fitBoxData=f.polyFitLib.fitBoxData(c,q)),e.fitBoxData)){e=f.polyFitLib.fitBoxInScanData(e.fitBoxData,
q,u,d?g(d):m);break a}e=void 0}else e=f.bboxLib.fromCenter(f.bboxLib.center(q),b.labelSize);e&&a.push(e)}return a};a.prototype.getIconPaths=function(a,c){return f.getColumnIconPathsStatic(this,a,c)};a.prototype.render_applyDynamicAttrVals=function(a,c,k){a=b.prototype.render_applyDynamicAttrVals.call(this,a,c,k);delete a["fill-rule"];return a};a.prototype.getPointAnimatorOptions=function(a){return{simple:!0}};return a}(f.SeriesBaseType),Ca=function(b){return b},ta=function(b){if(null==b)return Ca;
var a,d,c=b.scale[0],k=b.scale[1],e=b.translate[0],g=b.translate[1];return function(b,l){l||(a=d=0);l=2;var h=b.length,f=Array(h);f[0]=(a+=b[0])*c+e;for(f[1]=(d+=b[1])*k+g;l<h;)f[l]=b[l],++l;return f}},ca=function(b,a){return"GeometryCollection"===a.type?{type:"FeatureCollection",features:a.geometries.map(function(a){return ha(b,a)})}:ha(b,a)},E=f.en.error.mapping={noType:"The type member is missing.",wrongType:"The geoJSON type %% is not supported.",noCoordinates:"The object %% does not contain a coordinates member",
noGeometry:"The object type %% requires a geometry member.",noPropInType:"The object type %% requires a ## member.",notTopology:"The object is not topoJSON.",mapPathNotFound:"The map data path cannot be determined.",mapNotFound:'Error loading map data: "%%"',codeInvalid:"Regional code %% not recognized or invalid."},Q=["map","mapDataId","map.id"],R={Point:function(b,a,d,c){b=a.coordinates||a;return{data:b,bbox:f.bboxLib.bboxFromPoints([b]),type:"marker"}},Polygon:function(b,a,d,c){f.jL.def(a=a.coordinates)||
b.error(E.noCoordinates,"Polygon");"number"===typeof a[0][0][0]&&(a=a[0]);return{data:a,bbox:f.jL.evalPath(c,"properties.bbox")||f.bboxLib.bboxFromPoints(a)}},MultiPoint:function(b,a,d,c){c=[];var k=[];f.jL.def(a=a.coordinates)||b.error(E.noCoordinates,"MultiPoint");for(var e=0,g=a.length;e<g;e++)c[e]=R.Point(b,a[e],d),k[e]=c[e].bbox;return{type:"marker",points:c,bbox:f.bboxLib.bboxUnion(k)}},LineString:function(b,a,d,c){c=[];var k=[];f.jL.def(a=a.coordinates)||b.error(E.noCoordinates,"LineString");
for(var e=0,g=a.length;e<g;e++)c[e]=R.Point(b,a[e],d),k[e]=c[e].bbox;return{type:"line",points:c,bbox:f.bboxLib.bboxUnion(k)}},MultiLineString:function(b,a,d,c){c=[];var k,e=[];f.jL.def(k=a.coordinates)||b.error(E.noCoordinates,"MultiLineString");for(var g=0,h=k.length;g<h;g++){var l=k[g];a={};a.coordinates=l;c[g]=R.LineString(b,a,d);e[g]=c[g].bbox}return{type:"line",points:c,bbox:f.bboxLib.bboxUnion(e)}},MultiPolygon:function(b,a,d,c){var k=[],e,g=[];f.jL.def(e=a.coordinates)||b.error(E.noCoordinates,
"MultiPolygon");for(var h=0,l=e.length;h<l;h++){var m=e[h];a={};a.coordinates=m[0];k[h]=R.Polygon(b,a,d,c);g[h]=k[h].bbox}return{type:"polygon",points:k,bbox:f.jL.evalPath(c,"properties.bbox")||f.bboxLib.bboxUnion(g)}},GeometryCollection:function(b,a,d){a=a.geometries;for(var c=[],k=0,e=a.length;k<e;k++)c[k]=b.parseType(a[k],d);return c},Feature:function(b,a,d){var c;f.jL.def(c=a.geometry)||b.error(E.noPropInType,"Feature","geometry");f.jL.def(a.properties)||b.error(E.noPropInType,"Feature","properties");
return b.parseType(c,d,a)},FeatureCollection:function(b,a,d){d=d||{};var c=[],k,e=[],g=[],h=d.data,l=d.binding,m=d.mode,u=d.points||[];f.jL.def(a=a.features)||b.error(E.noPropInType,"FeatureCollection","features");if(l){var r=l.split(",");if(2===r.length){var q=r[0];var n=r[1]}}var C;if("makePoints"===m){m=0;for(r=a.length;m<r;m++){var y=a[m];c[m]=y.id?b.removePredef(u,y.id,d.cmi)||{}:{};c[m].map=y;f.jL.def(c[m].name)||f.jL.applySetting(c[m],y,"name","properties.name");if(k=f.jL.evalPath(c[m],"map.bbox")||
f.jL.evalPath(c[m],"map.properties.bbox"))c[m].x=[k[0],k[0]+k[2]],c[m].y=[k[1],k[3]+k[3]];b.setJscObjMapId(c[m],y.id,!0);k=y.properties;c[m].attributes=f.jL.fasterExtend(c[m].attributes||{},k);f.jL.def(c[m].attributes)||(c[m].attributes=k);if(l&&k&&h)for(var t=0,v=h.length;t<v;t++){var w=h[t];if(w[q]===k[n])for(var p in w)p!==q&&(c[m].attributes[p]=w[p])}k=b.parseType(y,d);f.jL.setPathVal(c[m],"map.bbox",k.bbox);if("marker"===k.type){var B=!0;c[m].x=k.data[0];c[m].y=k.data[1];g.push(k.data)}"line"===
k.type&&(C=!0);0!==k.bbox[2]&&b.isIncludedInBBox(b.getJscObjMapId(d.series),y.id)&&e.push(k.bbox)}g.length&&e.push(f.bboxLib.bboxFromPoints(g))}else for(m=0,r=a.length;m<r;m++)y=a[m],c[m]=b.parseType(y);c={points:c,bbox:f.bboxLib.bboxUnion(e)};C&&(c.type="line");B&&(c.type="marker");return c}},S=function(b){return b.getMapData?b.getMapData():b.mapData||b.map},da=function(b,a){b.getMapData?b.setMapData(a):b.mapData=a},v,Da=function(){function b(a){this.regionList=[];this.chart=a}b.prototype.error=
function(a,d,c){var b=this.chart;b.error.addError(b.id,a,d,c)};b.prototype.parse=function(a,d){return this.parseType(a,d,{})};b.prototype.parseType=function(a,d,c){var b,e;return f.jL.def(e=a.type)?(b=R[e])?b(this,a,d,c):this.error(E.wrongType,e):this.error(E.noType)};b.prototype.toPath=function(a){var d=a.type;f.jL.def(a=a.geometry)||this.error(E.noPropInType,d,"geometry");d=a.type;f.jL.def(a=a.coordinates)||this.error(E.noCoordinates,d);return f.pathLib.fromPoints(a,{isOpen:"LineString"===d||"MultiLineString"===
d})};b.prototype.flatten=function(a){return a&&a.join?a.join(" ").replace(/,/g," "):a};b.prototype.getBBoxOfPoints=function(a){for(var d=[],c,b,e,g=0,h=a.length;g<h;g++){var l=a[g],m=S(l);(c=m.bbox||f.jL.evalPath(m,"properties.bbox"))?c&&d.push(c):f.jL.def(b=l.x)&&f.jL.def(e=l.y)&&d.push([b,e,0,0])}return f.bboxLib.bboxUnion(d)};b.prototype.getSeriesBBox=function(a){var d=S(a),c=d?d.bbox:this.getBBoxOfPoints(a.points().items);if(c)return c;var b=[];if(d&&(f.jL.each(d.features,function(a){b.push(a.bbox)}),
c=f.bboxLib.bboxUnion(b)))return c;c=a.indexer;var e=c.hasKey("xs")?["xs","xe"]:["x","x"],g=c.hasKey("ys")?["ys","ye"]:["y","y"];a=c.min(e[0]);d=c.min(g[0]);e=c.max(e[1]);c=c.max(g[1]);return[a,d,e-a,c-d]};b.prototype.getDataBBox=function(a){var d=[],c=this;a=a||this.chart.series();if(a.each&&a.items.length)return a.each(function(a){(a=c.getSeriesBBox(a))&&d.push(a)}),f.bboxLib.bboxUnion(d)};b.prototype.geoIterator=function(a,d){function c(a){for(var c=0,b=a.length;c<b;c++)d(a[c])}function b(a){for(var c=
0,b=a.length;c<b;c++)d(a[c])}var e,g;f.jL.def(g=a.features)&&b(g);f.jL.def(e=a.geometries)&&c(e)};b.prototype.polygonIterator=function(a,d){var c=a.type;a=a.coordinates;if("Polygon"===c)for(var b=0,e=a.length;b<e;b++){var g=a[b];var h=[];for(var f=0,m=g.length;f<m;f++)c=g[f],h.push(c);d(h.slice(0))}else if("MultiPolygon"===c){g=0;for(var u=a.length;g<u;g++){var r=a[g];b=0;for(e=r.length;b<e;b++){var q=r[b];h=[];f=0;for(m=q.length;f<m;f++)c=q[f],h.push(c);d(h.slice(0))}}}};b.prototype.arrToGeo=function(a){return{type:"FeatureCollection",
features:a}};b.prototype.identifyCodeType=function(a,d){function c(a){if(2===a.length&&1<a[0].length&&1<a[1].length)return!0}d=d||[];var b=a.length,e=[],g=a.toLowerCase();this.regionList.length||(this.regionList=f.jL.keys(f.jL.evalPath(v,"mapIndex")));var h=a.split(":");if(c(h))return c(h[0].split("."))?"mapPropertyFilter":"propertyFilter";if(h=-1<a.indexOf("."))e=a.split(".");else if(4===b&&2===a.indexOf("_s"))return"soloCountry";if("albersusa"===g)return"albersUSA";if("world"===g)return"region|-1";
if(-1<g.indexOf(".json"))return"custom|-2";if(3<a.length&&!h&&-1<f.jL.indexOfCaseInv(this.regionList,a))return"region|-1";if(2===a.length)return"hasc|0";if(4===a.length)return"fips|1";if(3<a.length&&h)return 2===e.length&&2!==e[0].length?(d.length&&-1<f.jL.indexOfCaseInv(d,e[0])||this.getGeoObject(e[0]),"customFeature|-3"):"fips|1";"custom"===a||this.getGeoObject(g);return"custom|-2"};b.prototype.getMapCodeToLoad=function(a){return a.split(".")[0]};b.prototype.findParentRegion=function(a){var d=f.jL.evalPath(v,
"mapIndex"),c=this.identifyCodeType(a);"albersUSA"===c?a="us":"soloCountry"===c&&(a=a.replace("_s",""));if(2===a.length)for(var b in d){if(d.hasOwnProperty(b)&&-1<d[b].Countries.indexOf(a.toUpperCase()))return b}else throw"cant find region of non-isoA2 code.";};b.prototype.countryCode=function(a){var d=this.identifyCodeType(a);if("hasc|0"===d)return a;if("fips|1"===d||"hasc|2"===d)return a.split(".")[0]};b.prototype.findCodeToLoadCountryFeature=function(a){return this.findParentRegion(a)};b.prototype.isIncludedInBBox=
function(a,d){var c,b=f.jL.evalPath(v,"mapIndex");a&&(c=this.identifyCodeType(a));var e;return"region|-1"===c&&(e=b[a.toLowerCase()].noBBox)&&-1<e.indexOf(d.toUpperCase())?!1:!0};b.prototype.addAliasedAttributes=function(a){var d=a.properties,c;if(c=a.id||d.hasc)if(a.id||(a.id=c),a=this.identifyCodeType(c),d.mapcode=c,"fips|1"===a){d.mapLevel="province";d.provincecode=d.statecode=d.postal;d.province=d.state=d.name;d.countrycode=d.hasc.split(".")[0];if(c=d.region)d.countryregion=c;a:{c=d.countrycode;
c=c.toLowerCase();(a=f.jL.evalPath(v,"master.objects.countries.geometries"))||(a=f.jL.evalPath(v,"maps."+c+"_s.objects.countries.geometries"));if(a)for(var b=0,e=a.length;b<e;b++){var g=a[b].properties;if(g.hasc.toLowerCase()===c){c=g;break a}}c=void 0}c&&(d.country=c.name,c.region&&(d.worldregion=c.region),c.continent&&(d.continent=c.continent))}else if("hasc|0"===a){if(d.mapLevel="country",d.countrycode=d.hasc,d.country=d.name,c=d.region)d.worldregion=c}else"region|-1"===a&&(d.mapLevel="region")};
b.prototype.filenameWithoutExtension=function(a){a=a.replace(/\\/g,"/").split("/");a=a[a.length-1].split(".");1<a.length&&a.pop();return a.join(".")};b.prototype.idfyPath=function(a){a=this.filenameWithoutExtension(a);-1<a.indexOf(".")&&(a=a.split(".")[0]);a=a.replace(/\\/g,"/").replace(/\//g,"_").replace(/\./g,"_");return a.toLowerCase()};b.prototype.genericFilter=function(a,d){d=d||{};var c=[],b=d.getProperties,e=d.conditions;f.jL.each(a,function(a,d){d=b?b(a):a;var g=!0,k=!1;if("function"===typeof e)var h=
e(d);else{for(h in e)for(var f in d)if(f===h)if(e[h]===d[f]){k=!0;break}else g=!1;h=k&&g?!0:void 0}h&&c.push(a)});return c};b.prototype.featureMatchesPropertyFilter=function(a,d){var c=this.identifyCodeType(a);var b=f.jL.evalPath(d,"properties")||d;if("propertyFilter"===c){a=a.split(":");a[1]=a[1].toLowerCase();c=a[0];if(f.jL.def(d=f.jL.evalPath(b,c))||f.jL.def(d=f.jL.evalPath(b,c.toLowerCase()))||f.jL.def(d=f.jL.evalPath(b,c.toUpperCase())))b:{b=typeof(d=d.valueOf());if("string"===b){if(d.toLowerCase()===
a[1]){b=!0;break b}}else if(d===a[1].valueOf()){b=!0;break b}b=void 0}else b=void 0;return b}if(a.toLowerCase()===d.id.toLowerCase())return!0};b.prototype.removePredef=function(a,d,c){d=d.toLowerCase();for(var b,e,g,h=0,f=a.length;h<f;h++)if(g=a[h],e=this.getJscObjMapId(g,-1))if(e===d||(b=this.findGeoFeature(e,c))&&b.id&&b.id.toLowerCase()===d.toLowerCase())return a.splice(h,1),g};b.prototype.findJsObjByMapCode=function(a){function d(a,d){if(b.getJscObjMapId(a).toLowerCase()===d.toLowerCase())return!0}
function c(a){for(var c=e.series().items.slice(0),b=0,g=c.length;b<g;b++){var h=c[b];if(d(h,a))return h;for(var f=0,k=h._points.length;f<k;f++){var l=h._points[f];if(d(l,a))return l}}}var b=this,e=b.chart,g;if(g=b.findGeoFeature(a,b.chart.internal.mappingInfo)){if(g.id)return c(g.id);if(g.features){a=[];for(var h=0,l=g.features.length;h<l;h++){var m=g.features[h];a.push(b.findJsObjByMapCode(m.id||f.jL.evalPath(m,"properties.hasc")))}return a}return c(a)}};b.prototype.getJscObjMapId=function(a,d){function c(a){return-1===
d?a.toLowerCase():1===d?a.toUpperCase():a}if(a=(a.currentOptions||a)[Q[1]]||f.jL.evalPath(a,"userOptions."+Q[1]))return c(a);var b=0;for(var e=Q.length;b<e;b++)if("string"===typeof a)return b=this.identifyCodeType(a),"custom|-2"===b&&(a=this.idfyPath(a)),c(a)};b.prototype.setJscObjMapId=function(a,d,c){var b=a.userOptions||a;if(c&&b[Q[1]])return b;b[Q[1]]=d;a.key=d;return b};b.prototype.getDefinedDataBBox=function(a){var d=this,c,b=[],e,g,h=this.chart.ctManager;this.chart.series().each(function(a){d.getJscObjMapId(a,
-1);h.isMapLayer(a);if(!a.options("isBaseLayer"))if(e=d.getSeriesBBox(a))b.push(e);else{g=[];for(var c=0,k=a.userPoints.length;c<k;c++){var l=a.userPoints[c];(e=S(l).bbox)?b.push(e):g.push([l.x,l.y])}g.length&&b.push(f.bboxLib.bboxFromPoints(g))}});b.length&&(c=f.bboxLib.bboxUnion(b));return c};b.prototype.findTopoObjects=function(a,d){var c=this.identifyCodeType(d);d=d.toLowerCase();f.jL.def(a=a.objects)||this.error(E.noPropInType,"Topology","objects");var b=a;if("hasc|0"===c||"fips|1"===c)var e=
{conditions:function(a){var b;if((b=a.id||a.properties.hasc)&&0===b.toLowerCase().indexOf(d))return!0}};else if("region|-1"===c){b={countries:a.countries};var g=f.jL.evalPath(v,"mapIndex."+d+".Countries");e=this.getOtherRegionCountries(d);g+=","+e.join(",");e={conditions:function(a){if(-1<g.indexOf("*")||-1<g.indexOf(a.id))return!0},getProperties:function(a){return{id:a.id}}}}c={objects:{}};for(var h in b){b={type:"GeometryCollection"};var l=this.genericFilter(a[h].geometries,e);if(l.length){b.geometries=
l;var m=!0;c.objects[h]=b}}return m?c.objects:null};b.prototype.findFeatureProps=function(a,b){var c=a;"string"!==typeof a&&(c=this.getJscObjMapId(a));if(c){a=this.identifyCodeType(c);var d,e;if("custom|-2"===a){if(e=this.findGeoFeature(c,b))return e.properties}else{if("soloCountry"===a){var g=f.jL.evalPath(v,"maps."+c.toLowerCase());c=c.replace("_s","")}else if("fips|1"===a&&(e=this.findGeoFeature(c))&&e.properties)return e.properties;g||(g=f.jL.evalPath(v,"master"));if(g){e=this.findTopoObjects(g,
c);for(var h in e)for(b=e[h].geometries,g=0,a=b.length;g<a;g++)if((d=b[g].id||f.jL.evalPath(b[g],"properties.hasc"))&&d.toLowerCase()===c.toLowerCase())return b[g].properties}}}};b.prototype.findGeoFeature=function(a,b){function c(a,b,c){var d=f.strLib.lowerFirst(b[0]);e.isSoloCountry(c);if(h=e.getGeoObject(a,c))if(l=f.jL.findPathInArrSimple(h.features,"properties."+d,b[1],!0,!0)||f.jL.findPathInArrSimple(h.features,"properties."+d,b[1].toUpperCase(),!0,!0)||f.jL.findPathInArrSimple(h.features,"properties."+
d,b[1].toLowerCase(),!0,!0)){if(l.pop){if(1===l.length)return l[0];l=e.arrToGeo(l)}return l}}function d(a){if(b)for(var c=b.allMaps,d=0,g=c.length;d<g;d++){var h=c[d];if("propertyFilter"!==e.identifyCodeType(h)&&a.replace("_s","").toLowerCase()===h.toLowerCase())return!0}else return!0}var e=this,g=e.identifyCodeType(a),h,l,m=a,u=a.split(".");if("fips|1"===g||"customFeature|-3"===g){m=a.split(".")[0];var r=m.toLowerCase();if(h=e.getGeoObject(r,b))m="customFeature|-3"===g?u[1]:a,(l=f.jL.findPathInArrSimple(h.features,
"id",m,!1,!0))?(l.length&&(l=l[0]),"customFeature|-3"!==g&&l.id&&-1===l.id.indexOf(u[0])&&(l.id=a)):v.errorLib.throwWarning("Map feature "+m+" was not found.");return l}if("hasc|0"===g){if(g=e.getRegionsFromCountries([a])[0],h=e.getGeoObject(g.toLowerCase(),b))return l=f.jL.findInArrSimple(h.features,"id",a.toUpperCase())||f.jL.findInArrSimple(h.features,"id",a.toLowerCase())}else if("custom|-2"===g){if(h=e.getGeoObject(a,b))return l=f.jL.findInArrSimple(h.features,"id",a)||f.jL.findInArrSimple(h.features,
"id",a.toUpperCase())||f.jL.findInArrSimple(h.features,"id",a.toLowerCase())}else{if("mapPropertyFilter"===g)return a=a.split(":"),g=a[0].split("."),c(g[0],[g[1],a[1]],b);if("propertyFilter"===g||"mapPropertyFilter"===g){a=a.split(":");for(var q in v.geo)if(d(q)&&(r=c(q,a,b)))return r}}};b.prototype.getGeoObject=function(a,b){b&&this.isSoloCountry(b)&&2===a.length&&-1===a.indexOf("_s")&&(a+="_s");return f.jL.evalPath(v,"geo."+a.toLowerCase())};b.prototype.setGeoObject=function(a,b){f.jL.setPathVal(v,
"geo."+a.toLowerCase(),b)};b.prototype.loadMaps=function(a,b,c,k,e){function d(a){var b=a.data,c=t.idfyPath(a.id);"Topology"===a.data.type?t.updateDataWithCustomTopo(a.data,a):f.jL.def(a.data.type)?t.setGeoObject(c,b):t.error(E.noPropInType,"map data","type");a.state=2;l()}function h(a){var b=t.identifyCodeType(a.id);"world"===a.id?t.updateMasterTopo(f.jL.evalPath(v,"maps."+a.id.toLowerCase().replace("albersusa","us")),a,"maps.masterWorld"):"soloCountry"!==b&&t.updateMasterTopo(f.jL.evalPath(v,"maps."+
a.id.toLowerCase().replace("albersusa","us")),a);a.state=2;l()}function l(){var a=!0;for(var b=[],d,e,g=c.chartMappingInfo,h=0,l=x.length;h<l;h++){e=x[h];d=-1<e.codeType.indexOf("ustom");if(2!==e.state&&(a=!1,!d))return;d||b.push(e.id)}if(b.length&&!P){d=0;for(e=b.length;d<e;d++)t.updateGeoFromMaster(b[d]);P=!0}if(a){g.mapsLoading=!1;y();a=g.loadedCallStack;if(a.length)for(b=0,d=a.length;b<d;b++)a[b].cb();g.loadedCallStack=[];k(f.jL.evalPath(v,"master"),U)}}function m(a){var b;if("soloCountry"!==
t.identifyCodeType(a)&&(b=t.findParentRegion(a))&&-1<f.jL.indexOfCaseInv(w,b))return!0}function u(a,b,c){a.replace("_s","");if(t.getGeoObject(a,c))return!0}function r(a){for(var b=0,c=D.mapsLoadingList;b<c.length;b++){var d=c[b];if(d&&d.fls.id.toLowerCase()===a.toLowerCase())return!0}}function q(){var a=D.mapsLoadingList;if(a.length){var b=a[0].fls.state;0!==b&&(a=a.shift(),b&&a.cb(),q())}}function n(a,b,c,d){var e=this,g=b+a;D.mapsLoadingList.push({fls:c,cb:function(){d(c)}});f.platform.getScript(g,
function(){c.state=1;q()},function(){e.error(E.mapNotFound,g||"");c.state=-1;q()})}function p(a,b,c,d){var e=b+a;D.mapsLoadingList.push({fls:c,cb:function(){d(c)}});f.platform.getJson(e,function(a){c.data=a.data;c.state=1;q()},function(a){t.error(E.mapNotFound,e||"");c.state=-1;q()})}function y(){var a=f.jL.evalPath(v,"geo"),b;for(b in a)t.geoIterator(a[b],function(a){t.addAliasedAttributes(a)})}c=c||{};var t=this,D=c.chartMappingInfo||{},w=D.regionList,V=!1,B=!1,x=[],P=!1;a=a||[];b=b||[];if("string"===
typeof a){a=a.split(",");for(var A=0,z=a.length;A<z;A++)a[A]=a[A].trim().toLowerCase()}if("string"===typeof b)for(b=b.split(","),A=0,z=b.length;A<z;A++)b[A]=b[A].trim().toLowerCase();a.length&&(D.internalMapsUsed=!0);var U=t.getSeriesPrototypeFromList(a,b,c);a.sort();a=f.jL.sortedUniq(a).slice(0);A=0;for(z=a.length;A<z;A++){var F=t.identifyCodeType(a[A]);"region|-1"===F?w.push(a[A]):"fips|1"===F?a[A]=a[A].split(".")[0]:"mapPropertyFilter"===F&&(a[A]=this.getMapCodeToLoad(a[A]))}var J=t.isSoloCountry(D,
a);if(b=(t.chart.userOptions.baseUrl||f.platform.getRootScriptPath())+"/"){b+="resources/maps/";var H=!0;f.jL.evalPath(v,"mapIndex");A=0;for(z=a.length;A<z;A++){var I=a[A];F=t.identifyCodeType(I);var K="custom|-2"===F?t.idfyPath(I):I;(K=u(K,J,D))||(H=!1);K||r(I)||("custom|-2"===F?(F={id:t.idfyPath(I),fn:I,state:0,codeType:F},x.push(F),D.customMapsUsed=!0,p(I,"",F,d),V=!0):(B=D.internalMapsUsed=!0,"hasc|0"===F||"soloCountry"===F||"albersUSA"===F?(K="Countries/",K+=m(I)?I+"_c":I):K="fips|1"===F?"Countries/"+
I.split(".")[0]:I,K=(K+".js").toLowerCase().replace("albersusa","us"),F={id:I,fn:K,state:0,codeType:F},x.push(F),n(K,b,F,h)))}if(V||B)D.mapsLoading=!0}else t.error(E.mapPathNotFound);V||B||!H?V||B||H||k(f.jL.evalPath(v,"master"),U):(0===a.length&&e&&e(),k(f.jL.evalPath(v,"master"),U));return U};b.prototype.getSeriesPrototypeFromList=function(a,b,c){function d(a){a&&(h.dataMaps.push(a),h.allMaps.push(a))}var e=this;c=c||{};var g=c.series||[],h=c.chartMappingInfo||{},l,m,u,r,q,n,p=[];"string"===typeof a&&
(a=a.split(","));var v=function(b){if("string"===typeof(l=f.jL.evalPath(b,"map"))){r=e.identifyCodeType(l);"mapPropertyFilter"===r?(e.setJscObjMapId(b,l),a.push(e.getMapCodeToLoad(l)),d(e.getMapCodeToLoad(l))):"propertyFilter"!==r&&a.push(l);if("custom|-2"===r)e.setJscObjMapId(b,l=e.idfyPath(l));else{if("region|-1"===r){var c=e.getOtherRegionCountries(l);a.push.apply(a,c)}e.setJscObjMapId(b,l)}d(l)}else b.type&&"map"!==b.type?d("custom"):b.mapDataId&&d(b.mapDataId);if(n=b.points){c=0;for(var g=n.length;c<
g;c++){var h=n[c];"string"===typeof(m=f.jL.evalPath(h,"map"))&&(z=e.identifyCodeType(m,a),u=m,"custom|-2"===z?(e.setJscObjMapId(h,e.idfyPath(m)),a.push(m)):"customFeature|-3"===z?e.setJscObjMapId(h,m):"region|-1"===z?e.error("Region points not supported."):"hasc|0"===z?(a.push(e.findCodeToLoadCountryFeature(m)),e.setJscObjMapId(h,m)):"fips|1"===z?(a.push(m.split(".")[0]),e.setJscObjMapId(h,m)):"propertyFilter"===z?e.setJscObjMapId(h,m):"mapPropertyFilter"===z&&(e.setJscObjMapId(h,m),a.push(e.getMapCodeToLoad(m))),
d(u))}}!b.isBaseLayer&&p.push(b)},t=this.isSoloCountry(h),D=[];h.dataMaps=[];h.allMaps=[];h.contextMaps="";for(var w=0,x=a.length;w<x;w++){var B=a[w];var z=this.identifyCodeType(B);"mapPropertyFilter"===z?(a[w]=this.getMapCodeToLoad(B),h.allMaps.push(a[w])):"propertyFilter"!==z?(q=this.removePredef(g,B,h))?d(B):(h.contextMaps=h.contextMaps||"",h.contextMaps+=","+B,h.allMaps.push(B)):D.push(w);B="custom|-2"===z?this.idfyPath(B):B;B=this.setJscObjMapId(q||f.jL.fasterExtend({},{legendEntry:{visible:!1},
type:"map",mouseTracking:!1,defaultPoint:{color:"#d3d3d3"},isBaseLayer:!0}),B);c.contextSeries&&f.jL.fasterExtend(B,c.contextSeries);B.type||(B.type="map");p.push(B)}w=0;for(x=D.length;w<x;w++)a.splice(D[w],1);w=0;for(x=b.length;w<x;w++)q=b[w],a.push(q),h.allMaps.push(q);w=0;for(x=g.length;w<x;w++)b=g[w],v(b);if(c=c.existingSeries?c.existingSeries.items?c.existingSeries.items:c.existingSeries:c.existingSeries){w=0;for(x=c.length;w<x;w++)b=c[w],v(b);if((v=this.isSoloCountry(h))!==t)for(w=0,x=c.length;w<
x;w++)b=c[w],t=S(b),"object"===typeof t&&v!==t.solo&&((t=this.getJscObjMapId(b))&&-1===a.indexOf(t)&&a.push(t),-1===p.indexOf(b)&&p.push(b))}return p};b.prototype.updateGeoFromMaster=function(a){var b=f.jL.evalPath(v,"master"),c=a.toLowerCase(),k=c.replace("_s","");if("soloCountry"===this.identifyCodeType(a)){var e=!0;b=f.jL.evalPath(v,"maps."+a.toLowerCase())}"world"===a&&(b=f.jL.evalPath(v,"maps.masterWorld"));if(a=this.findTopoObjects(b,k))b=ca(b,a.provinces||a.countries),e&&(b.solo=!0),this.setGeoObject(c,
b)};b.prototype.updateDataWithCustomTopo=function(a,b){var c;"Topology"!==a.type&&this.error(E.notTopology);f.jL.def(c=a.objects)||this.error(E.noPropInType,"Topology","objects");var d=[],e;for(e in c)d.push(ca(a,c[e]));this.setGeoObject(b.id,1<d.length?d:d[0])};b.prototype.populateSeriesWhenAble=function(a,b,c){function d(){var d,g=f.jL.evalPath(v,"master");f.jL.evalPath(v,"geo");var k,r;var q=b.dataMaps;var n=b.allMaps,p,y=0;for(k=q.length;y<k;y++){var t=q[y];var x=h.identifyCodeType(t);"propertyFilter"===
x&&(p=h.findGeoFeature(t,b))&&p.id&&(q[y]=p.id)}y=0;for(k=n.length;y<k;y++)t=n[y],x=h.identifyCodeType(t),"propertyFilter"===x&&(p=h.findGeoFeature(t,b))&&p.id&&(n[y]=p.id);h.isSoloCountry(b);n=0;for(p=a.length;n<p;n++)if(y=a[n],q=y.options("mapDataId"))if(k=h.identifyCodeType(q),t=q,"propertyFilter"===k||"mapPropertyFilter"===k)(d=h.findGeoFeature(q,b))&&e(y,d.pop?h.arrToGeo(d):d,q);else if("object"===typeof(d=S(y)))e(y,d);else if(d=h.getGeoObject(t,b))e(y,d,q);else if(d=h.findTopoObjects(g,q))d=
ca(g,d.provinces||d.countries),e(y,d,q);else throw"map was not found for series "+q;else if(k=y.userPoints){t=[];x=0;for(var w=k.length;x<w;x++){var z=k[x];if(r=h.getJscObjMapId(z))if(r=h.findGeoFeature(r,b))t.push(r),da(z,r)}if(t.length||q)da(y,{type:"FeatureCollection",id:q,features:t}),h.setJscObjMapId(y,q)}c(a)}function e(a,c,d){var e;a.userOptions.map=c;da(a,c);!(e=c.properties)&&d&&(c=c.solo?d+"_s":d,e=h.findFeatureProps(c,b));if(d){h.setJscObjMapId(a,d);var g=h.identifyCodeType(d)}if(e)a.userOptions.name=
a.userOptions.name||e.name||"";else if("region|-1"===g)a.userOptions.name=a.userOptions.name||f.strLib.toTitleCase(d);else if("propertyFilter"===g||"mapPropertyFilter"===g)d=d.split(":"),a.userOptions.name=a.userOptions.name=f.strLib.toTitleCase(d[1])}function g(a){var c=f.strLib.getRandomString();f.jL.findInArrSimple(b.loadedCallStack,"id",c)||b.loadedCallStack.push({id:c,cb:a})}var h=this;b.mapsLoading?g(d):d()};b.prototype.getRegionsFromCountries=function(a){for(var b=f.jL.evalPath(v,"mapIndex"),
c=[],k="",e=0,g=a.length;e<g;e++)for(var h in b)if(b.hasOwnProperty(h)&&-1<b[h].Countries.indexOf(a[e].toUpperCase())){-1===k.indexOf(h)&&(c.push(h),k+=h);break}return c};b.prototype.updateMasterTopo=function(a,b,c){c=c||"master";b=f.jL.evalPath(v,c);b||(b={type:"Topology",transform:a.transform,objects:{},arcs:[]},f.jL.setPathVal(v,c,b));c=b.arcs;b=b.objects;for(var d=0,e=0,g=a.arcs.length;e<g;e++){var h=a.arcs[e];"number"===typeof h?d+=h:(c[d]=h,d++)}for(var l in a.objects)b[l]?Array.prototype.push.apply(b[l].geometries,
a.objects[l].geometries):b[l]=a.objects[l]};b.prototype.isSoloCountry=function(a,b){var c,d=f.jL.evalPath(v,"solos");if(!1===a.projection)return!1;if(1===a.allMaps.length)"hasc|0"===this.identifyCodeType(a.allMaps[0],a)&&-1<d.indexOf(a.allMaps[0].toLowerCase())&&(c=!0);else for(var e=void 0,g=0,h=a.allMaps.length;g<h;g++){var l=this.identifyCodeType(a.allMaps[g]);var m=a.allMaps[g];"mapPropertyFilter"===l&&(m=this.getMapCodeToLoad(m));if(m=this.countryCode(m)){if(m=m.toLowerCase(),-1<d.indexOf(m))if(!e)e=
m,c=!0;else if(e!==m){c=!1;break}}else if("propertyFilter"!==l){c=!1;break}}if(c&&b)for(g=0,h=b.length;g<h;g++)e=b[g],a=this.identifyCodeType(e),"hasc|0"===a&&-1<d.indexOf(e.toLowerCase())&&(b[g]=e+"_s");return c};b.prototype.getOtherRegionCountries=function(a){var b=[],c;(c=f.jL.evalPath(v,"mapIndex."+a))&&c.noBBox&&f.jL.each(c.noBBox.split(","),function(a,d){-1===c.Countries.indexOf(a)&&b.push(a)});return b};return b}(),ka=function(){return{val2lin:function(b){return b},lin2val:function(b){return b},
val2linxy:function(b,a){return[b,a]},lin2valxy:function(b,a){return[b,a]},doPostTranslate:!1}},J=Math.PI,n=Math.cos,p=Math.sin,M=Math.tan,N=Math.atan,T=Math.abs,x=function(b,a){return Math.pow(0>b&&1>T(a%1)?T(b):b,a)},Ea=Math.atanh,Fa=Math.sinh,H=Math.asin,Ga=Math.cosh,z=function(b){return b*J/180},X=function(b){return 180*b/J},pa=function(b,a,d,c){a=z(a);b=z(b);return[X(d(b,a)),X(c(b,a))]},O=function(b,a,d,c,f){return{type:b,val2linxy:function(b,c){return pa(b,c,a,d)},lin2valxy:function(a,b){return pa(a,
b,c,f)},doPostTranslate:!0}},aa=function(b){return O("mercator",function(a,b){return a},function(a,b){return Math.log(T(M(J/4+b/2)))},function(a,b){return a},function(a,b){return 2*N(x(Math.E,b))-J/2})},Ha={none:ka,mercator:aa,mercatortransverse:function(b){b=f.jL.map(b,z);var a=b[0],d=b[1];return O("mercatorTransverse",function(b,d){return Ea(n(d)*p(b-a))},function(b,f){return Math.atan2(M(f),n(b-a))-d},function(b,f){return a+N(Fa(b)/n(f+d))},function(a,b){return H(p(b+d)/Ga(a))})},lambertconformalconic:function(b,
a){if(0===a[0]&&0===a[1])return aa(b);b=f.jL.map(b,z);var d=b[0];b=b[1];a=f.jL.map(a,z);var c=Math.log(T(n(a[0])/n(a[1])))/Math.log(T(M(J/4+a[1]/2)/M(J/4+a[0]/2))),k=n(a[0])*x(M(J/4+a[0]/2),c)/c,e=k/x(M(J/4+b/2),c);return O("lambertConformalConic",function(a,b){return k/x(M(J/4+b/2),c)*p(c*(a-d))},function(a,b){return e-k/x(M(J/4+b/2),c)*n(c*(a-d))},function(a,b){return d+N(a/(e-b))/c},function(a,b){a=(0<c?1:0>c?-1:0)+Math.sqrt(x(a,2)+x(e-b,2));return 2*N(x(k/a,1/c))-J/2})},lambertazimuthalequalarea:function(b,
a){var d=z(b[0]),c=f.jL.map(a,z),k=function(a,b){return Math.sqrt(2/(1+p(c[0])*p(b)+n(c[0])*n(b)*n(a-d)))},e=function(a,b){return Math.sqrt(a*a+b*b)};return O("lambertAzimuthalEqualArea",function(a,b){return k(a,b)*n(b)*p(a-d)},function(a,b){return k(a,b)*(n(c[0])*p(b)-p(c[0])*n(b)*n(a-d))},function(a,b){return d+N(a*p(2*H(e(a,b)/2))/(e(a,b)*n(c[0])*n(2*H(e(a,b)/2))-b*p(c[0])*p(2*H(e(a,b)/2))))},function(a,b){return H(n(2*H(e(a,b)/2))*p(c[0])+b*p(2*H(e(a,b)/2))*n(c[0])/e(a,b))})},stereographic:function(b,
a){var d=z(b[0]),c=f.jL.map(a,z),k=function(a){return Math.sqrt((x(1*n(a),2)+x(.990025*p(a),2))/(x(1*n(a),2)+x(.995*p(a),2)))},e=function(a,b){return 2*k(b)/(1+p(c[0])*p(b)+n(c[0])*n(b)*n(a-d))},g=function(a,b){return 2*N(Math.sqrt(a*a+b*b)/(2*k(b)))};return O("stereographic",function(a,b){return e(a,b)*n(b)*p(a-d)},function(a,b){return e(a,b)*(n(c[0])*p(b)-p(c[0])*n(b)*n(a-d))},function(a,b){return d+N(a*p(g(a,b)/(Math.sqrt(a*a+b*b)*n(c[0])*n(g(a,b)-b*p(c[0])*p(g(a,b))))))},function(a,b){return H(n(g(a,
b))*p(c[0])+b*p(g(a,b))*n(c[0])/Math.sqrt(a*a+b*b))})},orthographic:function(b){b=f.jL.map(b,z);var a=b[0],d=b[1],c=function(a){return Math.sqrt((x(1*n(a),2)+x(.990025*p(a),2))/(x(1*n(a),2)+x(.995*p(a),2)))},k=function(a,b){return H(Math.min(Math.sqrt(a*a+b*b)/c(b),1))};return O("orthographic",function(b,d){return c(d)*n(d)*p(b-a)},function(b,g){return c(g)*(n(d)*p(g)-p(d)*n(g)*n(b-a))},function(b,c){return a+N(b*p(k(b,c))/(Math.sqrt(b*b+c*c)*n(k(b,c))*n(d)-c*p(k(b,c))*p(d)))},function(a,b){return H(n(k(a,
b))*p(d)+b*p(k(a,b))*n(d)/Math.sqrt(a*a+b*b))})}},ja=function(b,a,d){return(b=Ha[b.toLowerCase()])&&b(a,d)},wa=function(b){b.getConfig&&(b=b.getConfig());var a=b,d,c,k=function(a){return f.jL.isObject(a.map)?"loaded":a.mapDataId?"proto":a.map?"config":"none"};return"loaded"!==(d=k(b))&&"none"===d&&f.jL.find(a.points,function(a){return"none"!==(c=k(a))})?c:d},Aa=function(b,a){return ea(a,function(a,c){return b.projection.val2linxy(a,c)})};f.moduleLoader.registerModule("modules/maps",function(b,a){if(!b.isRendered&&
b.optionsNormalized&&a.type&&f.jL.startsWith(a.type,"map")){b.geoParser=b.geoParser||new Da(b);a=b.currentOptions;var d=b.options("mapping.base.layers");var c=b.options("mapping.referenceLayers");var k=b.options("mapping.base.series");d=b.geoParser.loadMaps(d,c,{contextSeries:k,series:a.series||[],chartMappingInfo:b.internal.mappingInfo},function(){b.mapsLoaded=!0});a.series=d;a=a.events=a.events||{};a.updateMapData=a.updateMapData||function(a){return va(a[0],a[1])};a.chartAreaRenderDataFirstTime=
a.chartAreaRenderDataFirstTime||function(a){if(a.ctManager.isType("map")){var c=b.geoParser.getDefinedDataBBox(b.internal.mappingInfo),d=b.geoParser.getDataBBox();d&&c&&f.bboxLib.compareBoxes(c,d)&&la(a,c);a.zoomBBoxInitial=Y(b);a.zoomUpdated()}};a.setAxes=a.setAxes||function(a){return ia(a)};a.preRenderData=a.preRenderData||function(a){var b=a[0];if(a[1]){var c=b.chart.geoParser.getDataBBox();ba(b,c);if((a=b.contentRect&&na(b,!0))&&b.contentRect){var d=a;b.zoomAxes.length||b.setZoomAxes();var e=
b.zoomAxes;e[0].setMapRange([c[0],c[0]+c[2]],[d[0],d[0]+d[2]]);e[1].setMapRange([c[1],c[1]+c[3]],[d[1],d[1]+d[3]]);e[0].setViewState(!0,!1);e[1].setViewState(!0,!1)}}else a=na(b,!0),ma(b,a);xa(b);a&&ia(b,a)};a.pan=a.pan||function(a){var b=a[0],c=b.zoomBBox;c&&(a=f.bboxLib.translate(c,a[1]),b.zoomBBox=f.bboxLib.snapInside(a,b.zoomBBoxMax))};a.cazoom=a.cazoom||function(a){var b=a[0];b.zoomBBox=f.bboxLib.snapInside(a[1],b.zoomBBoxMax)};b.zoom=function(a,c){b.action.log("zoom");ya(b.chartAreas(0),a,c)}}})&&
f.registerSeriesType("map",Ba);(function(){!f.jL.evalPath(JSC,"internal._modules.maps.data")&&f.jL.setPathVal(JSC,"internal._modules.maps.data",{mapIndex:{europe:{Countries:"RU,AL,AX,AD,AT,BE,BG,BA,BY,CH,CZ,DE,DK,ES,EE,FI,FR,GB,GR,HR,HU,IM,IE,IS,IT,JE,XK,LI,LT,LU,LV,MC,MD,MK,MT,ME,PL,PT,RO,SM,RS,SK,SI,SE,UA,NL,NO",noBBox:"RU"},asia:{Countries:"AF,AE,AM,AZ,BD,BH,BN,BT,CN,CY,GE,HK,ID,IN,IR,IQ,IL,JO,JP,KZ,KG,KH,KR,KW,LA,LB,LK,MO,MM,MN,MY,NP,OM,PK,PH,KP,PS,QA,SA,SG,SY,TH,TJ,TM,TP,TR,TW,UZ,VN,YE",noBBox:"RU,ID"},
africa:{Countries:"AO,BI,BJ,BF,BW,CF,CI,CM,CD,CG,KM,CV,DJ,DZ,EG,ER,ET,GA,GH,GN,GM,GW,KE,LR,LY,LS,MA,MG,ML,MZ,MR,MW,NA,NE,NG,RW,EH,SD,SS,SN,SL,SO,ST,SZ,TD,TG,TN,TZ,UG,ZM,ZW,GQ,ZA",noBBox:"CV"},oceania:{Countries:"AU,FJ,GU,NU,NR,PG,SB,TO,VU,WS,NZ,NC",noBBox:"ID"},americas:{Countries:"AW,AI,AR,AG,BS,BZ,BM,BO,BR,BB,CA,CL,CO,CU,CW,KY,DM,DO,EC,GD,GL,GT,GY,HN,HT,JM,KN,LC,MF,MX,MS,NI,PA,PE,PR,PY,SV,PM,SR,SX,TC,TT,UY,US,VC,VE,VG,VI,CR"},world:{Countries:"*"}},maps:{},solos:"ru,aw,af,ao,ai,al,ax,ad,ae,ar,am,as,tf,ag,au,at,az,bi,be,bj,bf,bd,bg,bh,bs,ba,bl,by,bz,bm,bo,br,bb,bn,bt,bw,cf,ch,cl,cn,ci,cm,cd,cg,ck,co,km,cv,cu,cw,ky,cy,cz,de,dj,dm,dk,do,dz,ec,eg,er,es,ee,et,fi,fj,fk,fr,fo,fm,ga,gb,ge,gg,gh,gi,gn,gm,gw,gr,gd,gl,gt,gu,gy,hk,hm,hn,hr,ht,hu,id,im,in,io,ie,ir,iq,is,il,it,jm,je,jo,jp,kz,ke,kg,kh,ki,kn,kr,xk,kw,la,lb,lr,ly,lc,li,lk,ls,lt,lu,lv,mo,mf,ma,mc,md,mg,mv,mx,mh,mk,ml,mt,mm,me,mn,mp,mz,mr,ms,mu,mw,my,na,ne,nf,ng,ni,nu,np,nr,om,pk,pa,pn,pe,ph,pw,pg,pl,pr,kp,pt,py,ps,pf,qa,ro,rw,eh,sa,sd,ss,sn,sg,gs,sh,sb,sl,sv,sm,so,pm,rs,st,sr,sk,si,se,sz,sx,sc,sy,tc,td,tg,th,tj,tm,tp,to,tt,tn,tr,tv,tw,tz,ug,ua,um,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,ye,zm,zw,cr,gq,nz,nc,sq,yt,re,gp,gz,gf,bq,qo,mq,nl,bq,bq,za,no,us,ca",
geo:{}});!JSC.maps&&(JSC.maps=function(){return f.jL.evalPath(JSC,"internal._modules.maps.data.maps")});!v&&(v=f.jL.evalPath(JSC,"internal._modules.maps.data"))})()})(JSC.internal._modules.maps.externals);
